@import './sass/helpers';
@import './sass/mixins';

@if variable-exists(utilities) {
    @each $label, $utilityObject in $utilities {
        @each $property, $value in $utilityObject {
            // Create configuration for utility
            $directions: false;
            $breakpoints: false;
            $increments: false;
            $negatives: false;
            $states: false;
            $dives: false;

            @each $configLabel, $configObject in $utilityConfig {
                @if $configLabel == $label {
                    @each $configProperty, $configValue in $configObject { 
                        @if $configProperty == directions {
                            $directions: $configValue;
                        } @else if $configProperty == breakpoints {
                            $breakpoints: $configValue;
                        } @else if $configProperty == increments {
                            $increments: $configValue;
                        } @else if $configProperty == negatives {
                            $negatives: $configValue;
                        } @else if $configProperty == states {
                            $states: $configValue;
                        } @else if $configProperty == dives {
                            $dives: $configValue;
                        }
                    }
                }
            }

            .#{$label} {
                #{$property}: $value !important;
            }

            // Negatives
            @if $negatives {
                .-#{$label} {
                    #{$property}: -#{$value} !important;
                }
            }
    
            // Directions
            @if $directions != false {
                @include directioner($label, $property, $value, $increments, $negatives, $breakpoints, $dives, $states);
            }
    
            // Increments
            @if $increments != false {
                @include incrementer($increments, $negatives, $label, $property, $value, $breakpoints, $dives, $states);
            }
            
            // States
            @if $states != false {
                @include stater($states, $label, $property, $value);

                @if $negatives {
                    @include stater($states, -$label, $property, -$value);
                }
            }
            
            // Breakpoints
            @if $breakpoints != false {
                @include breakpointer($label, $property, $value, $dives, $states);
            }
            
            // Dives
            @if $dives != false {
                @include diver($label, $property, $value);
            }
        }
    }
}