@use 'sass:map';
@use 'sass:list';

@use '../helpers/_helpers.scss';

$globals: (
    config: (
        global: (
            defaults: (
                breakpoints: null,
                directions: null,
                dives: null,
                increments: null,
                multiples: null,
                negatives: null,
                pseudos: null,
            ),
        ),
        utility: (
            styles: null,
            alts: null,
            breakpoints: null,
            directions: null,
            dives: null,
            increments: null,
            multiples: null,
            negatives: null,
            pseudos: null,
        ),
    ),
);

@function get($keys...) {
    @return map.get($globals, $keys...);
}

@mixin set($setting, $value, $isGlobal: 'false') {
    $mapKeys: config, utility;
    $type: utility;

    @if $isGlobal == true {
        $mapKeys: config, global, defaults;
        $type: global;
    }

    $setArgs: list.join($mapKeys, ($setting, $value));

    @if helpers.map-index-of(map.get($globals, $mapKeys...), $setting) {
        $globals: map.set($globals, $setArgs...) !global;
    } @else {
        @error 'Sass Utilizer: Invalid setting in #{type} config SET method: #{$setting}';
    }
}
